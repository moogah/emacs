# -*- mode: snippet; -*-
# contributor: Jeff Farr
# name: sql-query
# key: sql
# --
#+begin_src sql :engine `(let* ((conn (yas-choose-value (mapcar #'symbol-name (mapcar #'car jf/sql-connections)))) (product (plist-get (cdr (assoc (intern conn) jf/sql-connections)) :sql-product)) (engine (pcase product ('postgres "postgresql") ('mysql "mysql") ('sqlite "sqlite") ('oracle "oracle") ('sqlserver "ms") (_ "sql")))) (setq jf/--yas-sql-conn conn) engine)` :dbconnection `jf/--yas-sql-conn` :results table
${1:SELECT * FROM table_name}
LIMIT ${2:100}$0
#+end_src
