# Activities State

This directory contains git-controlled activities data from the `activities.el` package.

## Directory Structure

```
state/activities/
├── default/
│   └── activities-activities      (default/template)
└── {machine-role}/
    └── activities-activities      (e.g., apploi-mac/activities-activities)
```

Each machine has its own subdirectory containing the `activities-activities` file.

## Machine-Specific Configuration

**Default behavior**: Each machine uses its own activities file.

In `config/local/{machine-role}.el`, set the machine-specific activities directory:

```elisp
;; Use machine-specific activities directory (recommended)
;; Note: persist.el automatically appends the symbol name to create the file
(put 'activities-activities 'persist-location
     (expand-file-name "state/activities/apploi-mac/" jf/emacs-dir))
```

This allows each machine to have different activities while keeping them in git.

## Why Git-Controlled?

Unlike most runtime state (in `runtime/`), activities are valuable configurations that:
- Define task-oriented workspaces with specific window layouts
- Include project associations (git branches, worktrees, org-roam documents)
- Represent intentional, reusable workspace setups

Keeping this under version control allows:
- Backup and restore of workspace configurations
- Machine-specific activities (work vs personal machines)
- History tracking of workspace evolution

## Configuration

The default location is configured in `config/activities/activities.org`:
```elisp
(put 'activities-activities 'persist-location
     (expand-file-name "state/activities/default/" jf/emacs-dir))
```

Machine-specific overrides go in `config/local/{machine-role}.el`.

**Important**: `persist-location` must be a *directory*, not a file path. The persist.el system automatically appends the symbol name (`activities-activities`) to create the full file path.

## Format

The data is serialized Emacs Lisp generated by `persist.el`. It contains `activities-activity` structs with:
- Window state (from `window-state-get`)
- Buffer bookmarks (for restoration)
- Activity extensions metadata (projects, org-roam links, gptel sessions)
